(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,n,t){e.exports=t(223)},218:function(e,n){},219:function(e,n){},223:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(46),o=t.n(i),c=t(9),l=t(12),s=t(13),u=t(15),d=t(14),m=t(16),v="/about",p="/api",h="/account",f="/contact-us",g="/",b="/register",y="SET_SESSION_LOADING",E="SET_SESSION_STATUS",w="SET_USER_EMAIL",k="SET_USER_ID",O="SET_SESSION_EXPIRY",j="ADD_SESSION_ID",S="SET_SESSION_LOGIN_ERROR",D="SET_SESSION_WARNING",I=function(){window.location.assign(v)},x=function(){window.location.assign(p)},T=function(){window.location.assign(h)},N=function(){window.location.assign(f)},C=function(){window.location.assign(g)},P=function(){window.location.assign(b)};function R(e,n){return{type:e,payload:n}}function A(){return function(e){e(R(y,!0)),e(R(j,"")),e(R(O,"")),e(R(w,"")),e(R(k,"")),e(R(D,"")),e(R(S,"")),e(R(E,!1)),e(R(y,!1)),e(C)}}var L=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).addScrollListener=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nav",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"dark";document.addEventListener("scroll",function(){e>document.getElementById("description").getBoundingClientRect().top?document.getElementsByClassName(n)[0].classList.add(t):document.getElementsByClassName(n)[0].classList.remove(t)})},t.scrollToDescription=function(){return document.getElementsByClassName("description")[0].scrollIntoView()},t.scrollToTop=function(){return document.getElementsByClassName("index")[0].scrollIntoView()},t}return Object(m.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=document.getElementById("root").clientWidth;document.getElementsByClassName("nav")[0].classList.remove("dark"),e>1e3?this.addScrollListener(150):this.addScrollListener(400,"scroll-up","active")}},{key:"render",value:function(){return r.a.createElement("div",{className:"index"},r.a.createElement("div",{className:"main container"},r.a.createElement("div",{className:"content"},r.a.createElement("p",null,"TRAVEL THE WORLD. SAFE"),r.a.createElement("ul",{className:"mobile"},r.a.createElement("li",{onClick:this.scrollToDescription},"DISCOVER")))),r.a.createElement("div",{className:"description container",id:"description"},r.a.createElement("div",{className:"title"},"PROTECT WHAT'S IMPORTANT TO YOU"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"details"},r.a.createElement("h2",null,"Simple, everyday and everywhere"),r.a.createElement("p",null,"Enjoy trips and vacations with our free to use tracking interface.",r.a.createElement("br",null),"Let your family know you are safe and sound.",r.a.createElement("br",null),"View your trip details on map or export data in case of emergency.",r.a.createElement("br",null),r.a.createElement("a",{href:b},"Register")," ","and start using our services now."),r.a.createElement("p",null,"Additionally, you can deploy Tracker on your private home server using our",r.a.createElement("br",null),r.a.createElement("a",{href:"https://www.github.com/justez/tracker",target:"_blank",rel:"noopener noreferrer"},"open-source solution"),"."),r.a.createElement("button",{onClick:x,onKeyPress:x},"Read our API documentation")),r.a.createElement("div",{className:"photo"},r.a.createElement("img",{alt:"journey",src:"https://image.freepik.com/free-photo/car-travelling-by-sunny-road_1088-51.jpg"})))),r.a.createElement("button",{className:"scroll-up",onClick:this.scrollToTop,onKeyPress:this.scrollToTop,title:"Go to top"},"Up"))}}]),n}(r.a.Component),_=t(3),B=t(4);function z(){var e=Object(_.a)(["\n    margin-bottom: 4vh;\n"]);return z=function(){return e},e}function U(){var e=Object(_.a)(["\n    padding: 0 5vw 6vh 5vw;\n    align-items: center;\n    font-size: 0.8em;\n    font-weight: lighter;\n    display: inline-flex;\n"]);return U=function(){return e},e}function K(){var e=Object(_.a)(["\n    padding: 6vh 1vw 0 1vw;\n    font-size: 5vh;\n"]);return K=function(){return e},e}function q(){var e=Object(_.a)(["\n    padding-top: 10vh;\n    min-height: 80vh;\n"]);return q=function(){return e},e}var W=B.a.div(q()),M=B.a.div(K()),F=B.a.div(U()),G=B.a.p(z()),J=function(){return r.a.createElement(W,null,r.a.createElement(M,null,"title"),r.a.createElement(F,null,r.a.createElement("div",null,r.a.createElement(M,null,"section"),r.a.createElement(G,null,"text"),r.a.createElement(G,null,"text"))))},V=function(){return r.a.createElement("div",{className:"container"},"api")},X=function(e){function n(){return Object(l.a)(this,n),Object(u.a)(this,Object(d.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"Contact us"))}}]),n}(r.a.Component),Y=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"404"))},H=t(227),Z=t(226);function $(){var e=Object(_.a)(["\n    display: inline-block;\n    position: absolute;\n    right: ",";\n"]);return $=function(){return e},e}function Q(){var e=Object(_.a)(["\n    position: relative;\n"]);return Q=function(){return e},e}function ee(){var e=Object(_.a)(["\n    position: absolute;\n    text-align: left;\n    top: 50%;\n    left: 50%;\n    font-size: 1em;\n    transform: translate(-50%,-50%);\n    -ms-transform: translate(-50%,-50%);\n    background-color: white;\n    color: black;\n    border: 1px solid lightgray;\n    min-width: 50vw;\n    min-height: 50vh;\n    @media only screen and (max-width: 800px) {\n        width: 100%;\n    }\n"]);return ee=function(){return e},e}function ne(){var e=Object(_.a)(["\n    font-size: 2vmin;\n    color: red;\n"]);return ne=function(){return e},e}function te(){var e=Object(_.a)(["\n    line-height: 5vmin;\n    padding-left: 1vmin;\n    width: 98%;\n"]);return te=function(){return e},e}function ae(){var e=Object(_.a)(["padding: 1vh 0 2vh 0;"]);return ae=function(){return e},e}function re(){var e=Object(_.a)(["padding: 0 2vh 2vh 2vh;"]);return re=function(){return e},e}function ie(){var e=Object(_.a)(["border: 1px solid lightgray;"]);return ie=function(){return e},e}function oe(){var e=Object(_.a)(["padding-left: 2vh;"]);return oe=function(){return e},e}var ce=B.a.p(oe()),le=B.a.hr(ie()),se=B.a.div(re()),ue=B.a.div(ae()),de=B.a.input(te()),me=B.a.small(ne()),ve=B.a.form(ee()),pe=B.a.div(Q()),he=B.a.button($(),function(e){return"submit"===e.type?"auto":"0"}),fe=function(e){var n=e.input,t=e.label,a=e.type,i=e.disabled,o=e.placeholder,c=e.meta,l=c.error,s=c.touched;return r.a.createElement("div",{className:"form-item"},r.a.createElement("label",null,t),r.a.createElement(ue,null,r.a.createElement(de,Object.assign({},n,{disabled:i,placeholder:o||t,type:a})),l&&s&&r.a.createElement(me,null,l)))},ge=Object(c.b)(function(e){var n=e.session,t=n.id,a=n.active,r=n.loading,i=n.warning;return{active:a,error:n.error,id:t,loading:r,warning:i}},function(e){return{startSession:function(){return e(function(e,n){return e(R(y,!0)),fetch("/sessions/new",{method:"POST",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n().form.signin.values)}).then(function(n){n.json().then(function(n){e(R(j,n.id)),e(R(O,n.expiry)),e(R(w,n.email)),e(R(k,n.userId)),e(R(E,200===n.status)),n.warning&&e(R(D,n.warning)),n.error&&e(R(S,n.error)),200===n.status&&e(T),401===n.status&&setTimeout(function(){e(P),n.warning&&e(R(D,"")),n.error&&e(R(S,""))},1500)})},function(n){return e(R(S,n))}).finally(function(){return setTimeout(function(){return e(R(y,!1))},0)})})}}})(function(e){var n=e.handleSubmit,t=e.pristine,a=e.invalid,i=e.submitting,o=e.loading,c=e.error,l=e.warning;return r.a.createElement(ve,{id:"sign-in-modal-form",onSubmit:n(e.startSession)},r.a.createElement(ce,null,"Login to Tracker portal:"),r.a.createElement(le,null),r.a.createElement(se,null,l&&r.a.createElement("div",{className:"warning"},l),c&&"string"==typeof c&&r.a.createElement("div",{className:"error"},c),r.a.createElement(H.a,{component:fe,disabled:o,label:"Email:",name:"email",type:"email",placeholder:"Email"}),r.a.createElement(H.a,{component:fe,disabled:o,label:"Password:",name:"passwordLogIn",type:"password",placeholder:"Password"}),r.a.createElement(pe,null,r.a.createElement(he,{disabled:a||t||i,type:"submit"},o?"Loading...":"Login"),r.a.createElement(he,{type:"reset",onClick:function(){return P()}},"Register"))))}),be=Object(Z.a)({form:"signin",validate:function(e){var n=e.email,t=e.passwordLogIn;return{email:t&&!n&&"Required!",passwordLogIn:n&&!t&&"Required!"}}})(ge),ye=function(e){var n=document.getElementsByClassName("menu")[0];n.classList[n.classList.length-1?"remove":"add"]("active")},Ee=function(){var e=document.getElementById("sign-in-modal");e.style.display="block",e.addEventListener("click",function(n){"sign-in-modal"===n.target.id&&(e.style.display="none",document.onkeydown=void 0)}),document.onkeydown=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;("key"in n&&("Escape"===n.key||"Esc"===n.key)||27===n.keyCode)&&(e.style.display="none",document.onkeydown=void 0)}};var we=Object(c.b)(function(e){return{active:e.session.active}},function(e){return{endSession:function(){return e(A())}}})(function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"nav dark"},r.a.createElement("div",{className:"nav-line"},r.a.createElement("div",{className:"logo",tabIndex:"0",onClick:C,onKeyPress:C},r.a.createElement("img",{alt:"logo",src:"/images/mappoint.png"}),r.a.createElement("div",null,"Tracker")),r.a.createElement("div",{className:"menu-helper",onClick:ye},r.a.createElement("img",{alt:"menu",src:"/images/menu.png"}))),r.a.createElement("div",{className:"links"},r.a.createElement("ul",{className:"menu"},r.a.createElement("li",{className:h===window.location.pathname?"current":"",onClick:e.active?T:Ee,onKeyPress:e.active?T:Ee,tabIndex:"0"},"TRACKER portal"),r.a.createElement("li",{className:p===window.location.pathname?"current":"",onClick:x,onKeyPress:x,tabIndex:"0"},"API"),r.a.createElement("li",{className:v===window.location.pathname?"current":"",onClick:I,onKeyPress:I,tabIndex:"0"},"About Tracker"),r.a.createElement("li",{className:f===window.location.pathname?"current":"",onClick:N,onKeyPress:N,tabIndex:"0"},"Contact us"),e.active&&r.a.createElement("li",{onClick:e.endSession,onKeyPress:e.endSession,tabIndex:"0"},"Sign out")))),r.a.createElement("div",{id:"sign-in-modal",className:"modal-overlay"},r.a.createElement(be,null)))}),ke=t(30),Oe="SET_USER_DEVICES",je="SET_USER_DATA_LOADING",Se="SET_TRANSACTION_STATUS",De="SET_TRANSACTION_ERROR";function Ie(e,n){return{type:e,payload:n}}function xe(){var e=Object(_.a)(["margin-right: 2vh;"]);return xe=function(){return e},e}function Te(){var e=Object(_.a)(["\n    border: 1px solid grey;\n    border-radius: 1vmin;\n    line-height: 4vmin;\n    padding: 1vmin 1vmin 1vmin 1vmin;\n    font-size: 0.8em;\n    width: 100%;\n    @media only screen and (max-width: 800px) { font-size: 1em; }\n"]);return Te=function(){return e},e}function Ne(){var e=Object(_.a)(["\n    padding: 1vh 1vh 2vh 0;\n"]);return Ne=function(){return e},e}function Ce(){var e=Object(_.a)(["\n    text-align: left;\n    padding: 2vh 0 1vh 6vh;\n    width: 85%;\n    @media only screen and (max-width: 800px) { \n        width: 98%;\n        padding: 3vh 1vh 1vh 1vh;\n    }\n"]);return Ce=function(){return e},e}function Pe(){var e=Object(_.a)(["\n    margin: 0 0 2vh 0;\n"]);return Pe=function(){return e},e}function Re(){var e=Object(_.a)(["\n    font-size: 2vmin;\n    color: red;\n"]);return Re=function(){return e},e}function Ae(){var e=Object(_.a)(["\n    padding-top: 1vh;\n    height: 5vh;\n    color: red;\n"]);return Ae=function(){return e},e}var Le=B.a.div(Ae()),_e=B.a.div(Re()),Be=B.a.h4(Pe()),ze=B.a.form(Ce()),Ue=B.a.div(Ne()),Ke=B.a.input(Te()),qe=B.a.button(xe()),We=function(e){var n=e.input,t=e.label,a=e.type,i=e.placeholder,o=e.disabled,c=e.note,l=e.meta,s=l.error,u=l.touched;return r.a.createElement("div",null,r.a.createElement("label",null,t),r.a.createElement(Ue,null,r.a.createElement(Ke,Object.assign({},n,{disabled:o,placeholder:i||t,type:a})),c&&r.a.createElement("div",null,r.a.createElement("small",null,c),r.a.createElement("br",null)),s&&u&&r.a.createElement(_e,null,s)))},Me=function(e){return e&&e.replace(" ","")};var Fe=Object(c.b)(function(e){var n=e.account;return{loading:n.loading,error:n.error}},function(e){return{registerDevice:function(){return e(function(e,n){return e(Ie(je,!0)),fetch("/accounts/devices/new",{method:"POST",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({device:n().form.addTracker.values,email:n().session.email,id:n().session.id})}).then(function(n){n.json().then(function(n){e(Ie(Se,n.status)),n.error&&e(Ie(De,n.error||"Unable to create device account")),401===n.status&&setTimeout(function(){n.error&&e(Ie(De,"")),e(P)},2e3),200===n.status&&e(Ie(Oe,n.devices))})},function(n){return e(Ie(De,n))}).finally(function(){return e(Ie(je,!1))})})}}})(function(e){var n=e.handleSubmit,t=e.invalid,a=e.pristine,i=e.submitting,o=e.error,c=e.loading,l=e.registerDevice,s=e.closeForm;return r.a.createElement(ze,{onSubmit:n(l)},r.a.createElement(Be,null,"Add a Device:"),r.a.createElement(H.a,{component:We,disabled:c,label:"Tracking Device name:",name:"trackerName",placeholder:"Tracking Device name:",type:"text",normalize:Me}),r.a.createElement(H.a,{component:We,disabled:c,label:"Unique tracking device ID:",name:"trackerID",note:"Savely secure this ID and do not disclose it to anyone. This may lead to conterfeit location history!",placeholder:"Uninque Tracking Device ID:",type:"text",normalize:Me}),r.a.createElement(H.a,{component:We,disabled:c,label:"Device IP:",name:"trackerIP",note:"If IP of the device changes you will have to confirm your device via email.",placeholder:"Tracking Device IP:",type:"text",normalize:Me}),r.a.createElement(Le,null,o&&"string"==typeof o?o:""),r.a.createElement(qe,{disabled:t||a||i||c,type:"submit"},"Add Device"),r.a.createElement(qe,{type:"back",onClick:s,onKeyPress:s},"Back"))}),Ge=Object(Z.a)({form:"addTracker",validate:function(e){var n=e.trackerID,t=e.trackerIP,a=e.trackerName;return{trackerID:(n?n.length>20&&"ID is too long!":"Required!")||n.length<10&&"ID is too short!"||n.indexOf(" ")+1&&"White spaces are not allowed!",trackerIP:(t?t.length>39&&"IP is too long!":"Required!")||t.length<3&&"IP is too short!"||t.indexOf(" ")+1&&"White spaces are not allowed!",trackerName:(a?a.length>40&&"Name is too long!":"Required!")||a.indexOf(" ")+1&&"White spaces are not allowed!"}}})(Fe),Je=t(51),Ve=t.n(Je),Xe=t(102);function Ye(){var e=Object(_.a)(["\n    padding: 0 0 0 2vh;\n    background: none;\n    color: #25b0fb;\n    text-decoration: underline;\n"]);return Ye=function(){return e},e}function He(){var e=Object(_.a)(["\n    position: absolute;\n    right: 2vw;\n"]);return He=function(){return e},e}function Ze(){var e=Object(_.a)(["\n    border: 1px solid white;\n    min-height: 80vh;\n    border-radius: 1vmin;\n"]);return Ze=function(){return e},e}function $e(){var e=Object(_.a)(["\n    margin: 0 0 2vh 2vw;\n    font-size: 4vmin;\n    text-align: left;\n"]);return $e=function(){return e},e}function Qe(){var e=Object(_.a)(["color: red;"]);return Qe=function(){return e},e}var en=B.a.div(Qe()),nn=B.a.h2($e()),tn=B.a.div(Ze()),an=B.a.span(He()),rn=B.a.button(Ye()),on=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).state={loading:!1,showMap:!1,error:""},t.map=null,t.export=function(){var e=t.props,n=e.daySelected,a=e.device,r=e.tracks;t.setState({loading:!0});var i=Ve.a.utils.book_new();i.Props={Title:"".concat(a.name),Subject:"Track data for ".concat(a.name),Author:"Tracker Server",CreatedDate:Date().split("GMT")[0].trim()},i.SheetNames.push("1 Sheet");var o=[["Date","Lat","Lng"]];r.forEach(function(e){return o.push([e.date,e.coords.lat,e.coords.lng])}),i.Sheets["1 Sheet"]=Ve.a.utils.aoa_to_sheet(o);var c=Ve.a.write(i,{bookType:"xlsx",type:"binary"});Object(Xe.saveAs)(new Blob([function(e){for(var n=new ArrayBuffer(e.length),t=new Uint8Array(n),a=0;a<e.length;a++)t[a]=255&e.charCodeAt(a);return n}(c)],{type:"application/octet-stream"}),"".concat(a.name," ").concat(n.name,".xlsx")),t.setState({loading:!1})},t}return Object(m.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(window.google&&document.getElementById("map")){var n=this.props.tracks;if(n.length&&!this.map)this.map=new window.google.maps.Map(document.getElementById("map"),{center:{lat:+n[0].coords.lat,lng:+n[0].coords.lng},zoom:17}),new window.google.maps.Polyline({path:n.map(function(e){return{lat:+e.coords.lat,lng:+e.coords.lng}}),geodesic:!0,strokeColor:"#25b0fb",strokeOpacity:1,strokeWeight:2}).setMap(this.map),n.forEach(function(n){var t;new window.google.maps.InfoWindow({position:{lat:+n.coords.lat,lng:+n.coords.lng},content:(t=n,"\n    <span style={{ background-color: 'white' }}>\n        ".concat(t.date.split("T")[1].replace("Z","").split(".")[0],"\n    </span>\n"))}).setMap(e.map)})}}},{key:"render",value:function(){var e=this.props,n=e.daySelected,t=e.goBack,a=this.state,i=a.loading,o=a.error;return r.a.createElement("div",null,r.a.createElement(nn,null,"Selected date: ",n.name,r.a.createElement(an,null,i?"Generating file...":r.a.createElement(rn,{onClick:this.export},"Export"),r.a.createElement(rn,{onClick:t},"Back")),r.a.createElement(en,null,o)),r.a.createElement(tn,{id:"map"}))}}]),n}(r.a.Component);function cn(){var e=Object(_.a)(["\n            padding: 1vh 1vh 1vh 1vh;\n            min-width: ","\n            @media only screen and (max-width: 800px) { padding: 6vh 1vh 1vh 1vh; }\n        "]);return cn=function(){return e},e}function ln(){var e=Object(_.a)(["\n    background: none;\n    padding: 0 0 0 1vmin;\n    color: #25b0fb;\n    text-decoration: underline;\n"]);return ln=function(){return e},e}function sn(){var e=Object(_.a)(["\n    padding: 2vh 2vw 2vh 2vw;\n    border: 2px solid white;\n    font-size: 0.8em;\n    word-wrap: break-word;\n    border-radius: 1vh;\n    width: 90%;\n    margin-top: 2vh;\n    :hover {\n        cursor: pointer;\n        color: lightblue;\n    }\n"]);return sn=function(){return e},e}function un(){var e=Object(_.a)(["\n    margin: 3vh 0 0 1vh;\n    padding: 2vh 1vh 1vh 1vh;\n    width: 95%;\n    overflow: hidden;\n    border: 2px solid white;\n    border-radius: 1vh;\n    text-aligh: left;\n    @media only screen and (max-width: 800px) { padding: 1vh 1vh 1vh 1vh; }\n"]);return un=function(){return e},e}function dn(){var e=Object(_.a)(["\n    @media only screen and (min-width: 801px) { display: inline-flex; }\n    width: 98%;\n"]);return dn=function(){return e},e}function mn(){var e=Object(_.a)(["\n    margin: 0 0 0 2vw;\n    text-align: left;\n"]);return mn=function(){return e},e}function vn(){var e=Object(_.a)(["color: red;"]);return vn=function(){return e},e}function pn(){var e=Object(_.a)(["color: #25b0fb;"]);return pn=function(){return e},e}function hn(){var e=Object(_.a)(["\n    padding-top: 12vh;\n    min-height: 75vh;\n    width: 98%;\n    margin-left: 1vw;\n"]);return hn=function(){return e},e}var fn=B.a.div(hn()),gn=B.a.div(pn()),bn=B.a.div(vn()),yn=B.a.h2(mn()),En=B.a.div(dn()),wn=B.a.div(un()),kn=B.a.div(sn()),On=B.a.button(ln()),jn=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).state={showForm:!1,showDevice:void 0,loading:!1,tracks:void 0,trackDaySelected:void 0,trackDays:void 0,error:""},t.openDevice=function(e){t.setState({showDevice:e,showForm:!1,loading:!0,error:"",tracks:void 0,trackDaySelected:void 0,trackDays:[]});var n=t.props,a=n.email,r=n.userID;fetch("/devices/trackdays",{method:"POST",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Object(ke.a)({},e,{email:a,userID:r}))}).then(function(e){return e.json()}).then(function(e){t.setState({trackDays:e.trackDays}),200!==e.status&&t.setState({error:e.error||"Unexpected error ocurred. Please try again later."})}).catch(function(){return t.setState({trackDays:[]})}).finally(function(){return t.setState({loading:!1})})},t.getTracksByDay=function(e){var n=t.props,a=n.email,r=n.userID;t.setState({trackDaySelected:e,loading:!0,error:""}),fetch("/devices/tracks",{method:"POST",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:e.id,email:a,userID:r})}).then(function(e){return e.json()}).then(function(e){200===e.status?t.setState({tracks:e.tracks||[]}):t.setState({error:e.error||"Failed to retrieve data. Please contact the administrator.",trackDaySelected:void 0,tracks:void 0})}).catch(function(e){return t.setState({error:e.error||"Failed to retrieve data. Please contact the administrator.",trackDaySelected:void 0,tracks:void 0})}).finally(function(){return t.setState({loading:!1})})},t.handleChangeDay=function(){return t.setState({tracks:void 0,trackDaySelected:void 0})},t.handleDeleteDevice=function(){var e=t.state.showDevice;t.setState({showDevice:void 0,tracks:void 0,trackDaySelected:void 0,trackDays:void 0}),t.props.deleteDevice(e)},t}return Object(m.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){if(this.props.getUserDevices(),!window.google||!window.google.maps){var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyDbAz1XXxDoKSU2nZXec89rcHPxgkvVoiw","&callback=resolveGoogleMapsPromise"),e.async=!0,document.body.appendChild(e)}}},{key:"componentDidUpdate",value:function(e){!this.state.showForm&&e.devices.length<this.props.devices.length&&this.setState({showForm:!1})}},{key:"render",value:function(){var e=this,n=this.props,t=n.active,a=n.devices,i=n.loading,o=n.error,c=this.state,l=c.showForm,s=c.showDevice,u=c.tracks,d=c.error,m=c.trackDays,v=c.loading,p=c.trackDaySelected,h=B.a.div(cn(),a.length?"40%":"80%");return t&&!u?r.a.createElement(fn,null,r.a.createElement(yn,null,"Your Devices:"),r.a.createElement(En,null,r.a.createElement(h,null,i&&!a.length&&"Loading account...",i&&a.length>0&&"Processing request...",!i&&o&&r.a.createElement(bn,null,o),!i&&a&&a.length>0&&a.map(function(n){return r.a.createElement(kn,{key:n.id,onClick:function(){return!i&&s?s.id!==n.id:e.openDevice(n)}},s&&s.id===n.id?r.a.createElement(gn,null,n.name):n.name)}),!i&&a&&a.length>0&&a.length<10&&r.a.createElement(kn,{onClick:function(){return e.setState({showForm:!0,showDevice:void 0})}},"Add new device"),!i&&a&&0===a.length&&r.a.createElement(Ge,null)),l&&r.a.createElement(Ge,{closeForm:function(){return e.setState({showForm:!1})}}),s&&r.a.createElement(wn,null,!v&&r.a.createElement(bn,null,d),v&&!m.length&&r.a.createElement("p",null,"Loading days recorded..."),!v&&m&&0===m.length&&r.a.createElement("p",null,"There are no tracking points recorded yet!"),v&&p&&r.a.createElement("p",null,"Loading tracks and opening map..."),m.length>0&&r.a.createElement("div",null,"Days recorded:",m&&m.map(function(n){return r.a.createElement(kn,{key:n.id,onClick:function(){return!v&&e.getTracksByDay(n)}},n.name)})),r.a.createElement(kn,{onClick:this.handleDeleteDevice},"Delete device")))):u?r.a.createElement(fn,null,r.a.createElement(on,{device:s,daySelected:p,tracks:u,goBack:this.handleChangeDay})):r.a.createElement(fn,null,r.a.createElement(En,null,"Your session is not active. Please"," ",r.a.createElement(On,{onClick:function(){return document.getElementById("sign-in-modal").style.display="block"},onKeyPress:function(){return document.getElementById("sign-in-modal").style.display="block"}},"LOGIN")))}}]),n}(r.a.Component),Sn=Object(c.b)(function(e){var n=e.session,t=n.active,a=n.email,r=n.userID,i=e.account;return{active:t,email:a,userID:r,devices:i.devices,loading:i.loading,status:i.status,error:i.error}},function(e){return{getUserDevices:function(){return e(function(e,n){return e(Ie(je,!0)),fetch("/accounts/devices/all",{method:"POST",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:n().session.email,id:n().session.userID})}).then(function(n){n.json().then(function(n){e(Ie(Se,n.status)),e(Ie(De,"")),n.error&&204!==n.status&&e(Ie(De,n.error)),401===n.status&&setTimeout(function(){n.error&&e(Ie(De,""))},2e3),200===n.status&&e(Ie(Oe,n.devices))})},function(n){return e(Ie(De,n))}).finally(function(){return setTimeout(function(){return e(Ie(je,!1))},100)})})},deleteDevice:function(n){return e(function(e){return function(n,t){return n(Ie(je,!0)),fetch("/accounts/devices/delete",{method:"DELETE",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({device:e,email:t().session.email,id:t().session.userID})}).then(function(a){a.json().then(function(a){200===a.status&&n(Ie(Oe,t().account.devices.filter(function(n){return n.id!==e.id}))),a.error&&n(Ie(De,a.error||"Unable to delete device.")),a.error&&setTimeout(function(){n(Ie(De,""))},4e3)})},function(e){return n(Ie(De,e))}).finally(function(){return n(Ie(je,!1))})}}(n))}}})(jn);function Dn(){var e=Object(_.a)(["\n    text-align: center;\n    width: 25%;\n"]);return Dn=function(){return e},e}function In(){var e=Object(_.a)(["\n    margin: 0 5% 0 5%;     \n    width: 90%;\n    display: flex;\n"]);return In=function(){return e},e}function xn(){var e=Object(_.a)(["\n    display: flex;\n    flex-direction: row;\n    min-height: 10vh;\n    width: 100%;\n    align-items: center;\n    text-align: center;\n    font-size: 0.7em;\n    @media only screen and (max-width: 800px) {\n        display: none;\n    }\n"]);return xn=function(){return e},e}var Tn=B.a.div(xn()),Nn=B.a.ul(In()),Cn=B.a.li(Dn()),Pn=function(){return r.a.createElement(Tn,{id:"footer"},r.a.createElement(Nn,null,r.a.createElement(Cn,{tabIndex:"0",onClick:T,onKeyPress:T},"TRACKER portal"),r.a.createElement(Cn,{tabIndex:"0",onClick:x,onKeyPress:x},"API"),r.a.createElement(Cn,{tabIndex:"0",onClick:I,onKeyPress:I},"About Tracker"),r.a.createElement(Cn,{tabIndex:"0",onClick:N,onKeyPress:N},"Contact us")))};function Rn(){var e=Object(_.a)(["\n    width: 100%;\n    background-color: white;\n    color: black;\n    padding: 10vh 0 2vh 0;\n    font-size: 0.8em;\n    display: inline-flex;\n"]);return Rn=function(){return e},e}function An(){var e=Object(_.a)(["\n    text-align: left;\n    width: 50vw;\n    @media only screen and (max-width: 800px) { width: 100%; }\n    @media only screen and (min-width: 801px) { padding-left: 25%; }\n"]);return An=function(){return e},e}function Ln(){var e=Object(_.a)(["\n    color: red;\n"]);return Ln=function(){return e},e}function _n(){var e=Object(_.a)(["\n    font-size: 2vmin;\n    color: red;\n"]);return _n=function(){return e},e}function Bn(){var e=Object(_.a)(["\n    border: 1px solid grey;\n    border-radius: 1vmin;\n    line-height: 4vmin;\n    padding: 1vmin 1vmin 1vmin 1vmin;\n    font-size: 0.8em;\n    width: 100%;\n    @media only screen and (max-width: 800px) { font-size: 1em; }\n"]);return Bn=function(){return e},e}function zn(){var e=Object(_.a)(["\n    width: 100%;\n    min-height: 65vh;\n    padding: 10vh 0 2vh 0;\n"]);return zn=function(){return e},e}function Un(){var e=Object(_.a)(["padding: 1vh 1vh 2vh 0;"]);return Un=function(){return e},e}function Kn(){var e=Object(_.a)(["padding: 2vh 2vh 2vh 2vh;"]);return Kn=function(){return e},e}function qn(){var e=Object(_.a)(["border: 1px solid lightgray;"]);return qn=function(){return e},e}function Wn(){var e=Object(_.a)(["padding-left: 2vh;"]);return Wn=function(){return e},e}var Mn=B.a.h2(Wn()),Fn=B.a.hr(qn()),Gn=B.a.div(Kn()),Jn=B.a.div(Un()),Vn=B.a.div(zn()),Xn=B.a.input(Bn()),Yn=B.a.small(_n()),Hn=B.a.p(Ln()),Zn=B.a.form(An()),$n=B.a.div(Rn()),Qn=function(e){var n=e.input,t=e.label,a=e.type,i=e.placeholder,o=e.disabled,c=e.note,l=e.meta,s=l.error,u=l.touched;return r.a.createElement("div",{className:"form-item"},r.a.createElement("label",null,t),r.a.createElement(Jn,null,r.a.createElement(Xn,Object.assign({},n,{disabled:o,placeholder:i||t,type:a})),c&&r.a.createElement("div",null,r.a.createElement("small",null,c),r.a.createElement("br",null)),s&&u&&r.a.createElement(Yn,null,s)))},et=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(r)))).state={error:"",loading:!1,status:void 0},t.openLogin=function(){document.getElementById("sign-in-modal").style.display="block"},t.submit=function(e){t.setState({loading:!0}),fetch("/accounts/create",{method:"POST",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return t.setState({status:e.status,error:200!==e.status?e.error:""})}).catch(function(){return t.setState({error:"Unexpected error occured... Please try again later."})}).finally(function(){t.setState({loading:!1})})},t}return Object(m.a)(n,e),Object(s.a)(n,[{key:"render",value:function(){var e=this.props,n=e.handleSubmit,t=e.pristine,a=e.invalid,i=e.submitting,o=this.state,c=o.loading,l=o.error,s=o.status,u=function(e){return e&&e.replace(" ","")};return r.a.createElement($n,null,200===s?r.a.createElement(Vn,null,"You have successfully registered! You can now "," ",r.a.createElement("button",{onClick:this.openLogin,onKeyPress:this.openLogin},"login to enter the ","TRACKER portal"),"."):r.a.createElement(Zn,{id:"register-form",onSubmit:n(this.submit)},r.a.createElement(Mn,null,"Register your Tracker Account:"),r.a.createElement(Fn,null),r.a.createElement(Gn,null,r.a.createElement(H.a,{component:Qn,disabled:c,label:"Email:",name:"email",type:"email",placeholder:"Email"}),r.a.createElement(H.a,{component:Qn,disabled:c,label:"Tracking Device name:",name:"trackerName",placeholder:"Tracking Device name:",type:"text",normalize:u}),r.a.createElement(H.a,{component:Qn,disabled:c,label:"Unique tracking device ID:",name:"trackerID",note:"Savely secure this ID and do not disclose it to anyone. This may lead to conterfeit location history!",type:"text",placeholder:"Uninque tracking device ID:",normalize:u}),r.a.createElement(H.a,{component:Qn,disabled:c,label:"Device IP:",name:"trackerIP",note:"If IP of the device changes you will have to confirm your device via email.",placeholder:"Tracking Device IP:",type:"text",normalize:u}),r.a.createElement(H.a,{component:Qn,disabled:c,label:"Password:",name:"passwordRegister",type:"password",placeholder:"Password"}),r.a.createElement(H.a,{component:Qn,disabled:c,label:"Repeat Password:",name:"passwordRepeat",type:"password",placeholder:"Password again:"}),r.a.createElement("button",{disabled:a||t||i,type:"submit"},c?"Loading...":"Register"),200!==s&&l&&r.a.createElement(Hn,null,l))))}}]),n}(r.a.Component),nt=Object(Z.a)({form:"register",validate:function(e){var n=e.email,t=e.passwordRegister,a=e.passwordRepeat,r=e.trackerID,i=e.trackerIP,o=e.trackerName;return{email:!n&&"Required!",trackerID:(r?r.length>20&&"ID is too long!":"Required!")||r.length<10&&"ID is too short!"||r.indexOf(" ")+1&&"White spaces are not allowed!",trackerIP:(i?i.length>39&&"IP is too long!":"Required!")||i.length<3&&"IP is too short!"||i.indexOf(" ")+1&&"White spaces are not allowed!",trackerName:(o?o.length>40&&"Name is too long!":"Required!")||o.indexOf(" ")+1&&"White spaces are not allowed!",passwordRegister:t?t&&a&&t!==a&&"Passwords do not match!":"Required!",passwordRepeat:a?t&&a&&t!==a&&"Passwords do not match!":"Required!"}}})(et),tt=t(228),at=t(230),rt=t(231),it=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(i)))).view=function(){return r.a.createElement("main",null,r.a.createElement(tt.a,null,r.a.createElement(at.a,null,r.a.createElement(rt.a,{exact:!0,path:g,component:L}),r.a.createElement(rt.a,{path:v,component:J}),r.a.createElement(rt.a,{path:p,component:V}),r.a.createElement(rt.a,{path:h,component:Sn}),r.a.createElement(rt.a,{path:b,component:nt}),r.a.createElement(rt.a,{path:f,component:X}),r.a.createElement(rt.a,{component:Y}))))},t}return Object(m.a)(n,e),Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=(new Date).toJSON().substring(0,10).replace("-0","-");this.props.active&&this.props.expiry!==e&&this.props.endSession(),document.getElementsByTagName("main")[0].addEventListener("click",function(){return document.getElementsByClassName("menu")[0].classList.remove("active")})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(we,null),this.view(),r.a.createElement(Pn,null))}}]),n}(r.a.Component);var ot=Object(c.b)(function(e){var n=e.session,t=n.email,a=n.active,r=n.expiry;return n.loading,{email:t,active:a,expiry:r}},function(e){return{endSession:function(n){return e(A())}}})(it),ct=t(104),lt=t(7),st=t(105),ut=t(73),dt=t(106),mt=t.n(dt),vt=t(107),pt=t.n(vt),ht=t(31),ft={account:{devices:[],loading:!1,error:"",status:void 0},session:{id:"",userID:"",active:!1,error:"",loading:!1,email:"",expiry:"",warning:""}};var gt=t(229),bt=Object(lt.c)({account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft.account,n=arguments.length>1?arguments[1]:void 0,t=function(t){return Object(ke.a)({},e,Object(ht.a)({},t,n.payload))};switch(n.type){case Oe:return t("devices");case je:return t("loading");case De:return t("error");case Se:return t("status");default:return e}},form:gt.a,session:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft.session,n=arguments.length>1?arguments[1]:void 0,t=function(t){return Object(ke.a)({},e,Object(ht.a)({},t,n.payload))};switch(n.type){case E:return t("active");case O:return t("expiry");case y:return t("loading");case w:return t("email");case k:return t("userID");case j:return t("id");case S:return t("error");case D:return t("warning");default:return e}}}),yt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||lt.d,Et={key:"tracker",storage:mt.a,whitelist:["session"],stateReconciler:pt.a},wt=Object(ut.a)(Et,bt),kt=Object(lt.e)(wt,yt(Object(lt.a)(st.a))),Ot=Object(ut.b)(kt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,{store:kt},r.a.createElement(ct.PersistGate,{loading:r.a.createElement("div",null,"Loading"),persistor:Ot},r.a.createElement(ot,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.95b2a4ac.chunk.js.map